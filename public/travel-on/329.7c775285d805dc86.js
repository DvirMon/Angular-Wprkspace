"use strict";(self.webpackChunktravel_on=self.webpackChunktravel_on||[]).push([[329],{329:(Yt,C,l)=>{l.r(C),l.d(C,{PlacesPageComponent:()=>Wt});var t=l(2716),u=l(177),f=l(8834),m=l(9213),v=l(2791);let $=(()=>{class a{constructor(){this.side=(0,t.hFB)("right"),this.label=(0,t.hFB)(),this.routerLink=(0,t.hFB)(),this.clicked=(0,t.CGW)()}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["dom-floating-button"]],inputs:{side:[1,"side"],label:[1,"label"],routerLink:[1,"routerLink"]},outputs:{clicked:"clicked"},standalone:!0,features:[t.aNF],decls:3,vars:17,consts:[["mat-raised-button","","color","accent",3,"click","disableRipple","routerLink"]],template:function(o,n){1&o&&(t.j41(0,"button",0),t.bIt("click",function(){return n.clicked.emit()}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()),2&o&&(t.xc7("right","left"===n.side()?null:0,"px")("left","right"===n.side()?null:0,"px")("border-top-right-radius","left"===n.side()?25:null,"px")("border-bottom-right-radius","left"===n.side()?25:null,"px")("border-top-left-radius","right"===n.side()?25:null,"px")("border-bottom-left-radius","right"===n.side()?25:null,"px"),t.Y8G("disableRipple",!0)("routerLink",n.routerLink()),t.R7$(),t.SpI(" ",t.bMT(2,15,n.label())," "))},dependencies:[u.MD,u.PV,v.iI,v.Wk,f.Hl,f.$z,m.m_],styles:["button[_ngcontent-%COMP%]{position:fixed;top:64px}"],changeDetection:0})}}return a})();var X=l(2813),p=l(5596),Q=l(3273);let H=(()=>{class a{transform(e,o="medium"){const n=this.convertToDate(e);return(0,u.Yq)(n,o,"en-US")}convertToDate(e){return e instanceof Q.Dc?e.toDate():e}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275pipe=t.EJ8({name:"dateTimestampPipe",type:a,pure:!0,standalone:!0})}}return a})();var g=l(9969),z=l(9079),W=l(4412),Y=l(7786),y=l(5245),M=l(6354),Z=l(3236),J=l(8793),x=l(6697),K=l(9974),q=l(4360),tt=l(5343),ot=l(3703),at=l(1397),nt=l(8750);function _(a,i){return i?e=>(0,J.x)(i.pipe((0,x.s)(1),function et(){return(0,K.N)((a,i)=>{a.subscribe((0,q._)(i,tt.l))})}()),e.pipe(_(a))):(0,at.Z)((e,o)=>(0,nt.Tg)(a(e,o)).pipe((0,x.s)(1),(0,ot.u)(e)))}var it=l(1584),c=function(a){return a.DEFAULT="default",a.CHANGED="changeState",a.SELECTED="selected",a}(c||{});let rt=(()=>{class a{#e;constructor(){this.selected=t.hFB.required(),this.changed=(0,t.CGW)(),this.isSelected=(0,t.EWP)(()=>this.selected()?c.SELECTED:c.DEFAULT),this.#e=new W.t(c.DEFAULT),this.iconState=(0,z.ot)(this.#t())}#t(){return(0,Y.h)(this.#o(),this.#a())}#o(){return this.#e.asObservable().pipe((0,y.i)(1),(0,M.T)(()=>c.CHANGED))}#a(){return this.#e.asObservable().pipe((0,y.i)(1),function lt(a,i=Z.E){const e=(0,it.O)(a,i);return _(()=>e)}(300),(0,M.T)(e=>e===c.SELECTED),(0,M.T)(e=>e?c.DEFAULT:c.SELECTED))}onButtonClick(e){if(void 0===e&&(e=this.isSelected()),e===c.CHANGED)return;this.#e.next(e);const o=this.#n(e);this.#i(o)}#n(e){return e===c.DEFAULT?c.SELECTED:c.DEFAULT}#i(e){const o=this.#r(e);this.#l(o)}#l(e){this.changed.emit(e)}#r(e){return{source:this,selected:e!==c.DEFAULT}}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["to-place-card-button"]],inputs:{selected:[1,"selected"]},outputs:{changed:"changed"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[["mat-icon-button","",3,"click"],["fontIcon","favorite"]],template:function(o,n){1&o&&(t.j41(0,"button",0),t.bIt("click",function(){return n.onButtonClick(n.iconState())}),t.nrm(1,"mat-icon",1),t.k0s()),2&o&&(t.R7$(),t.Y8G("@iconAnimation",void 0===n.iconState()?n.isSelected():n.iconState()))},dependencies:[u.MD,f.Hl,f.iY,m.m_,m.An],data:{animation:[(0,g.hZ)("iconAnimation",[(0,g.wk)("default",(0,g.iF)({transform:"scale(1)",color:"#707070"})),(0,g.wk)("changeState",(0,g.iF)({transform:"scale(1.2)",color:"#707070"})),(0,g.wk)("selected",(0,g.iF)({transform:"scale(1)",color:"#f73282"})),(0,g.kY)("default <=> changeState",(0,g.i0)("0.1s ease")),(0,g.kY)("selected <=> changeState",(0,g.i0)("0.1s ease"))])]},changeDetection:0})}}return a})();function st(a,i){1&a&&t.eu8(0)}function ct(a,i){if(1&a&&t.DNE(0,st,1,0,"ng-container",2),2&a){const e=t.XpG(),o=t.sdS(2),n=t.sdS(4);t.Y8G("ngTemplateOutlet",e.isGrid()?n:o)}}function dt(a,i){if(1&a&&(t.j41(0,"mat-card",3)(1,"mat-card-header"),t.nrm(2,"img",4),t.k0s(),t.j41(3,"mat-card-content"),t.nrm(4,"mat-icon",5),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8),t.k0s()(),t.j41(9,"mat-card-content")(10,"span"),t.EFF(11),t.nI1(12,"dateTimestampPipe"),t.k0s(),t.j41(13,"span"),t.EFF(14),t.nI1(15,"dateTimestampPipe"),t.k0s()()()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngSrc",e.place().imageUrl)("alt",e.place().destination.city),t.R7$(4),t.JRh(e.place().destination.city),t.R7$(2),t.JRh(e.place().destination.country),t.R7$(3),t.SpI(" ",t.i5U(12,6,e.place().takeoff,"EEEE, MMMM d")," "),t.R7$(3),t.SpI(" ",t.i5U(15,9,e.place().landing,"EEEE, MMMM d")," ")}}function gt(a,i){if(1&a&&(t.j41(0,"dt",14)(1,"span",16),t.EFF(2),t.k0s()()),2&a){const e=i.$implicit;t.R7$(2),t.SpI(" # ",e," ")}}function ut(a,i){if(1&a){const e=t.RV6();t.j41(0,"mat-card",6)(1,"div",7),t.nrm(2,"img",8),t.k0s(),t.j41(3,"mat-card-header")(4,"mat-card-title"),t.nrm(5,"mat-icon",5),t.EFF(6),t.k0s(),t.j41(7,"to-place-card-button",9),t.bIt("changed",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onSelectedChanged(n))}),t.k0s(),t.j41(8,"button",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onEdit())}),t.nrm(9,"mat-icon",11),t.k0s()(),t.j41(10,"mat-card-content")(11,"section",12)(12,"dl",13),t.Z7z(13,gt,3,1,"dt",14,t.Vm6),t.k0s()(),t.j41(15,"section",15)(16,"span")(17,"b"),t.EFF(18,"Takeoff:"),t.k0s(),t.EFF(19),t.nI1(20,"dateTimestampPipe"),t.k0s(),t.j41(21,"span")(22,"b"),t.EFF(23,"Landing:"),t.k0s(),t.EFF(24),t.nI1(25,"dateTimestampPipe"),t.k0s()()(),t.nrm(26,"mat-card-footer"),t.k0s()}if(2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngSrc",e.place().imageUrl)("alt",e.place().destination.city),t.R7$(4),t.Lme(" ",e.place().destination.city,", ",e.place().destination.country," "),t.R7$(),t.Y8G("selected",e.selected()),t.R7$(6),t.Dyx(e.place().activities),t.R7$(6),t.SpI(" ",t.i5U(20,7,e.place().takeoff,"EEEE, MMMM d, h:mm a")," "),t.R7$(5),t.SpI(" ",t.i5U(25,10,e.place().landing,"EEEE, MMMM d, h:mm a")," ")}}let ht=(()=>{class a{constructor(){this.place=t.hFB.required(),this.selected=t.hFB.required(),this.router=(0,t.WQX)(v.Ix),this.isGrid=(0,t.hFB)(!0),this.showOverlay=(0,t.vPA)(!1),this.selectedChanged=(0,t.CGW)()}_createChangedEvent(e){return{selected:e.selected,source:this}}onSelectedChanged(e){const o=this._createChangedEvent(e);this.selectedChanged.emit(o)}onToggleOverlay(){this.showOverlay.update(e=>!e)}onEdit(){this.router.navigateByUrl("admin/"+this.place().id)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["to-places-card"]],inputs:{place:[1,"place"],selected:[1,"selected"],isGrid:[1,"isGrid"]},outputs:{selectedChanged:"selectedChanged"},standalone:!0,features:[t.aNF],decls:5,vars:1,consts:[["cardTable",""],["cardGrid",""],[4,"ngTemplateOutlet"],[1,"places-list-card"],["mat-card-image","","width","150","height","150",3,"ngSrc","alt"],["fontIcon","location_on"],[1,"places-grid-card"],[1,"w-full","h-64"],["mat-card-image","","fill","",3,"ngSrc","alt"],[3,"changed","selected"],["mat-icon-button","",3,"click"],["fontIcon","edit"],[1,"activities"],[1,"activities-list"],[1,"activities-item"],[1,"schedule"],[1,"activities-text"]],template:function(o,n){1&o&&t.DNE(0,ct,1,1,"ng-container")(1,dt,16,12,"ng-template",null,0,t.C5r)(3,ut,27,13,"ng-template",null,1,t.C5r),2&o&&t.vxM(n.place()?0:-1)},dependencies:[u.MD,u.T3,u.kt,H,p.Hu,p.RN,p.m2,p.WQ,p.MM,p.kF,p.Lc,p.dh,rt,m.m_,m.An,f.iY],styles:["mat-icon[_ngcontent-%COMP%]{color:#9e9e9e;font-size:24px}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%]   img.mat-mdc-card-image[_ngcontent-%COMP%]{position:relative!important}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%] > mat-card-header.mat-mdc-card-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:flex-end;gap:8px;padding:0 16px}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%] > mat-card-header.mat-mdc-card-header[_ngcontent-%COMP%] > div.mat-mdc-card-header-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;font-size:larger}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:8px 16px 16px}mat-card.mat-mdc-card.places-grid-card[_ngcontent-%COMP%]   section.schedule[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mat-mdc-card.places-table-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.mat-mdc-card.places-table-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding:8px}.mat-mdc-card.places-table-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:8px;display:flex;flex-direction:column;justify-content:center;gap:16px;flex-grow:1}div.image-overlay-container[_ngcontent-%COMP%]{position:relative}div.overlay[_ngcontent-%COMP%]{height:100%;position:absolute;inset:0;background:#3f51b599;color:#fff;font-weight:550;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0}dl.activities-list[_ngcontent-%COMP%]{display:flex;gap:8px}dl.activities-list[_ngcontent-%COMP%] > dt.activities-item[_ngcontent-%COMP%]{height:32px;display:flex;justify-content:center;align-items:center;background-color:#e0e0e0;border-radius:24px}dl.activities-list[_ngcontent-%COMP%] > dt.activities-item[_ngcontent-%COMP%] > span.activities-text[_ngcontent-%COMP%]{padding:0 16px}"],changeDetection:0})}}return a})();const pt=(a,i)=>i.id;function mt(a,i){if(1&a){const e=t.RV6();t.j41(0,"section",0)(1,"to-places-card",1),t.bIt("selectedChanged",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onSelectedChanged(n))}),t.k0s()()}if(2&a){const e=i.$implicit,o=t.XpG();t.R7$(),t.Y8G("place",e)("selected",o.selection()[e.id])("isGrid",o.isGrid())}}let bt=(()=>{class a{constructor(){this.places=t.hFB.required(),this.selection=t.hFB.required(),this.isGrid=(0,t.hFB)(!0),this.selectionChanged=(0,t.CGW)(),this.gridClass=(0,t.EWP)(()=>this.isGrid()?"grid-container":"list-container")}onSelectedChanged(e){const{source:o,selected:n}=e,{place:r}=o;this._emitChangeEvent({placeId:r().id,selected:n})}_emitChangeEvent(e){this.selectionChanged.emit({source:this,currentSelection:e})}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["to-places-list"]],inputs:{places:[1,"places"],selection:[1,"selection"],isGrid:[1,"isGrid"]},outputs:{selectionChanged:"selectionChanged"},standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[[1,"places-card-wrapper"],[3,"selectedChanged","place","selected","isGrid"]],template:function(o,n){1&o&&(t.j41(0,"div"),t.Z7z(1,mt,2,3,"section",0,pt),t.k0s()),2&o&&(t.HbH(n.gridClass()),t.R7$(),t.Dyx(n.places()))},dependencies:[u.MD,ht],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;gap:24px;grid-template-columns:repeat(auto-fill,minmax(400px,1fr))}.list-container[_ngcontent-%COMP%]{display:grid;gap:24px;grid-template-columns:repeat(2,1fr)}"]})}}return a})();var ft=l(9571),vt=l(2643),b=l(7336),Mt=l(8203),kt=l(9417),S=l(6600);const Tt=["button"],Ct=["*"];function yt(a,i){if(1&a&&t.nrm(0,"mat-pseudo-checkbox",3),2&a){const e=t.XpG();t.Y8G("disabled",e.disabled)}}function xt(a,i){if(1&a&&t.nrm(0,"mat-pseudo-checkbox",3),2&a){const e=t.XpG();t.Y8G("disabled",e.disabled)}}const F=new t.nKC("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:function _t(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1}}}),I=new t.nKC("MatButtonToggleGroup"),St={provide:kt.kq,useExisting:(0,t.Rfq)(()=>B),multi:!0};let E=0;class G{constructor(i,e){this.source=i,this.value=e}}let B=(()=>{class a{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(o=>o.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}constructor(e,o,n){this._changeDetector=e,this._dir=n,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+E++,this.valueChange=new t.bkB,this.change=new t.bkB,this.appearance=o&&o.appearance?o.appearance:"standard",this.hideSingleSelectionIndicator=o?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=o?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new vt.CB(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;const n=e.target.id,r=this._buttonToggles.toArray().findIndex(h=>h.buttonId===n);let s=null;switch(e.keyCode){case b.t6:case b.Fm:s=this._buttonToggles.get(r)||null;break;case b.i7:s=this._getNextButton(r,-1);break;case b.UQ:s=this._getNextButton(r,"ltr"===this.dir?-1:1);break;case b.n6:s=this._getNextButton(r,1);break;case b.LE:s=this._getNextButton(r,"ltr"===this.dir?1:-1);break;default:return}s&&(e.preventDefault(),s._onButtonClick(),s.focus())}_emitChangeEvent(e){const o=new G(e,this.value);this._rawValue=o.value,this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(e,o,n=!1,r=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(e):this._selectionModel.deselect(e):r=!0,r?Promise.resolve().then(()=>this._updateModelValue(e,n)):this._updateModelValue(e,n)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>null!=e.value&&o===e.value):e.value===this._rawValue)}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){const o=this._buttonToggles.get(e);if(!o.disabled){o.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,o){const n=this._buttonToggles;for(let r=1;r<=n.length;r++){const h=n.get((e+o*r+n.length)%n.length);if(h&&!h.disabled)return h}return null}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(o=>this._selectValue(o))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e){const o=this._buttonToggles.find(n=>null!=n.value&&n.value===e);o&&(o.checked=!0,this._selectionModel.select(o),this.multiple||(o.tabIndex=0))}_updateModelValue(e,o){o&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(t.gRc),t.rXU(F,8),t.rXU(Mt.dS,8))}}static{this.\u0275dir=t.FsC({type:a,selectors:[["mat-button-toggle-group"]],contentQueries:function(o,n,r){if(1&o&&t.wni(r,P,5),2&o){let s;t.mGM(s=t.lsd())&&(n._buttonToggles=s)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(o,n){1&o&&t.bIt("keydown",function(s){return n._keydown(s)}),2&o&&(t.BMQ("role",n.multiple?"group":"radiogroup")("aria-disabled",n.disabled),t.AVh("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",t.L39],value:"value",multiple:[2,"multiple","multiple",t.L39],disabled:[2,"disabled","disabled",t.L39],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",t.L39],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",t.L39]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[t.Jv_([St,{provide:I,useExisting:a}]),t.GFd]})}}return a})(),P=(()=>{class a{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}constructor(e,o,n,r,s,h){this._changeDetectorRef=o,this._elementRef=n,this._focusMonitor=r,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new t.bkB;const T=Number(s);this.tabIndex=T||0===T?T:null,this.buttonToggleGroup=e,this.appearance=h&&h.appearance?h.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+E++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this.isSingleSelector()||!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){const o=this.buttonToggleGroup._buttonToggles.find(n=>0===n.tabIndex);o&&(o.tabIndex=-1),this.tabIndex=0}this.change.emit(new G(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(I,8),t.rXU(t.gRc),t.rXU(t.aKT),t.rXU(ft.FN),t.kS0("tabindex"),t.rXU(F,8))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["mat-button-toggle"]],viewQuery:function(o,n){if(1&o&&t.GBs(Tt,5),2&o){let r;t.mGM(r=t.lsd())&&(n._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(o,n){1&o&&t.bIt("focus",function(){return n.focus()}),2&o&&(t.BMQ("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),t.AVh("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",t.L39],appearance:"appearance",checked:[2,"checked","checked",t.L39],disabled:[2,"disabled","disabled",t.L39]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[t.GFd,t.aNF],ngContentSelectors:Ct,decls:8,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(o,n){if(1&o){const r=t.RV6();t.NAR(),t.j41(0,"button",1,0),t.bIt("click",function(){return t.eBV(r),t.Njj(n._onButtonClick())}),t.j41(2,"span",2),t.DNE(3,yt,1,1,"mat-pseudo-checkbox",3)(4,xt,1,1,"mat-pseudo-checkbox",3),t.SdG(5),t.k0s()(),t.nrm(6,"span",4)(7,"span",5)}if(2&o){const r=t.sdS(1);t.Y8G("id",n.buttonId)("disabled",n.disabled||null),t.BMQ("role",n.isSingleSelector()?"radio":"button")("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.isSingleSelector()?null:n.checked)("aria-checked",n.isSingleSelector()?n.checked:null)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),t.R7$(3),t.vxM(n.buttonToggleGroup&&n.checked&&!n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),t.R7$(),t.vxM(n.buttonToggleGroup&&n.checked&&n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),t.R7$(3),t.Y8G("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[S.r6,S.wg],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-standard-button-toggle-selected-state-text-color )}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-legacy-button-toggle-selected-state-text-color )}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-legacy-button-toggle-disabled-state-text-color )}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font);font-size:var(--mat-standard-button-toggle-label-text-size);line-height:var(--mat-standard-button-toggle-label-text-line-height);font-weight:var(--mat-standard-button-toggle-label-text-weight);letter-spacing:var(--mat-standard-button-toggle-label-text-tracking)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-standard-button-toggle-disabled-selected-state-text-color )}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape);border-bottom-right-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape);border-bottom-left-radius:var(--mat-standard-button-toggle-shape)}"],encapsulation:2,changeDetection:0})}}return a})();var Ft=l(6860);const It=["*",[["mat-toolbar-row"]]],Et=["*","mat-toolbar-row"];let Gt=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275dir=t.FsC({type:a,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return a})(),Bt=(()=>{class a{constructor(e,o,n){this._elementRef=e,this._platform=o,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static{this.\u0275fac=function(o){return new(o||a)(t.rXU(t.aKT),t.rXU(Ft.OD),t.rXU(u.qQ))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["mat-toolbar"]],contentQueries:function(o,n,r){if(1&o&&t.wni(r,Gt,5),2&o){let s;t.mGM(s=t.lsd())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(o,n){2&o&&(t.HbH(n.color?"mat-"+n.color:""),t.AVh("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[t.aNF],ngContentSelectors:Et,decls:2,vars:0,template:function(o,n){1&o&&(t.NAR(It),t.SdG(0),t.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return a})(),w=(()=>{class a{constructor(){this._isGrid=(0,t.vPA)(!0)}getIsGrid(){return this._isGrid}toggleIsGrid(){this._isGrid.update(e=>!e)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Pt=(()=>{class a{#e=(0,t.WQX)(w);onToggleChanged(){this.#e.toggleIsGrid()}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["to-places-header"]],standalone:!0,features:[t.aNF],decls:8,vars:0,consts:[[1,"w-full"],[1,"flex-1"],["value","grid",3,"change"],["value","grid"],["fontIcon","grid_view"],["value","table"],["fontIcon","table_view"]],template:function(o,n){1&o&&(t.j41(0,"mat-toolbar",0),t.nrm(1,"section",1),t.j41(2,"section")(3,"mat-button-toggle-group",2),t.bIt("change",function(){return n.onToggleChanged()}),t.j41(4,"mat-button-toggle",3),t.nrm(5,"mat-icon",4),t.k0s(),t.j41(6,"mat-button-toggle",5),t.nrm(7,"mat-icon",6),t.k0s()()()())},dependencies:[Bt,P,B,m.An],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:transparent;padding:0}  mat-button-toggle mat-pseudo-checkbox{display:none!important}"],changeDetection:0})}}return a})();var wt=l(4796),d=l(6138),D=l(1626),O=l(5024);let Dt=(()=>{class a{#e=(0,t.WQX)(D.Qq);#t=(0,t.WQX)(O.H);loadPlaces(){const e=`${this.#t}/places`;return this.#e.get(e)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var R=l(6822),L=l(6544),j=l(1203),k=l(5558),A=l(983);function U(a,i){return(0,t.N4e)((0,t.WQX)(t.zZn),()=>{const e=(0,t.WQX)(a);return o=>e[i](o)})}function N(a,i,e){return(0,L.o)((0,j.F)((0,k.n)(o=>a(o).pipe((0,R.Hn)({next:n=>(0,d.M8)(i,{[e]:n}),error:()=>A.w})))))}const Ot={places:[]};var jt=l(9030),Ut=l(7673);let V=(()=>{class a{#e=(0,t.WQX)(O.H);#t=this.#e+"/favorites";#o=(0,t.WQX)(D.Qq);loadFavorites(e){return this.#o.get(`${this.#t}/${e}`).pipe((0,k.n)(o=>function At(a,i,e){return(0,jt.v)(()=>a()?i:e)}(()=>!o,this.#a(e),(0,Ut.of)(o))))}#a(e){return this.#o.post(this.#t,{userId:e})}updateFavoriteDoc(e,o){return this.#o.post(`${this.#t}/update/${e}`,o)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const Qt=(0,d.Eu)({providedIn:"root"},(0,wt.JT)("store"),function Lt(a){return(0,d.Mj)((0,d.Q2)(Ot),(0,d.RI)(i=>({loadPlaces:N(U(a,"loadPlaces"),i,"places")})))}(Dt),function Vt(a){return(0,d.Mj)((0,d.Q2)({favorite:{}}),(0,d.RI)(i=>({loadFavorites:N(U(a,"loadFavorites"),i,"favorite")})),(0,d.RI)((i,e=(0,t.WQX)(V))=>({updateFavoriteDB:(0,L.o)((0,j.F)((0,k.n)(o=>{const{id:n}=o;return e.updateFavoriteDoc(n,o).pipe((0,R.Hn)({next:()=>(0,d.M8)(i,r=>({favorite:{...r.favorite,...o}})),error:()=>A.w}))})))})),(0,d.QO)(({favorite:i})=>({favoriteMap:(0,t.EWP)(()=>function $t(a){return function Xt(a){return 0===Object.keys(a).length}(a)?{}:a.vacationIds.reduce((i,e)=>({...i,[e]:!0}),{})}(i()))})))}(V),(0,d.TK)(a=>({onInit(){a.loadPlaces()}})));let Wt=(()=>{class a{#e;#t;#o;constructor(){this.#e=(0,t.WQX)(t.zZn),this.#t=(0,t.WQX)(Qt),this.#o=(0,t.WQX)(w),this.userId=t.hFB.required(),this.places=this.#t.places,this.selection=this.#t.favoriteMap,this.isGrid=this.#o.getIsGrid()}ngOnInit(){this.#t.loadFavorites(this.userId)}onSelectionChanged(e){const{currentSelection:o}=e,n=function zt(a,i){const{vacationIds:e}=a,o=function Ht(a,i){const{placeId:e,selected:o}=a;return o?[...i,e]:i.filter(n=>n!==e)}(i,e);return{...a,vacationIds:[...o]}}(this.#t.favorite(),o);this.#t.updateFavoriteDB(n)}onLogout(){(0,t.N4e)(this.#e,()=>(0,t.WQX)(X.a).logout())}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["to-places"]],inputs:{userId:[1,"userId"]},standalone:!0,features:[t.aNF],decls:8,vars:4,consts:[[1,"places-wrapper"],[1,"h-40","flex","justify-center","items-center"],[1,"places-header-wrapper","w-10/12"],[3,"clicked","label"],[1,"places-content-wrapper","w-10/12"],[3,"selectionChanged","places","selection","isGrid"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"header",1)(2,"div",2),t.nrm(3,"to-places-header"),t.k0s(),t.j41(4,"dom-floating-button",3),t.bIt("clicked",function(){return n.onLogout()}),t.k0s()(),t.j41(5,"main")(6,"div",4)(7,"to-places-list",5),t.bIt("selectionChanged",function(s){return n.onSelectionChanged(s)}),t.k0s()()()()),2&o&&(t.R7$(4),t.Y8G("label","Logout"),t.R7$(3),t.Y8G("places",n.places())("selection",n.selection())("isGrid",n.isGrid()))},dependencies:[Pt,bt,$],styles:["div.places-wrapper[_ngcontent-%COMP%]{background-image:url(user.9ff56192b726b238.jpg);background-attachment:fixed;background-size:cover;background-position:center;min-height:100vh}main[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row;justify-content:center}div.places-content-container[_ngcontent-%COMP%]{height:100%;justify-content:center;display:flex}"],changeDetection:0})}}return a})()}}]);